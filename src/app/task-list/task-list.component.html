<div class="divTable table-responsive">
    <table class="table table-striped table-hover">
        <thead class="bg-success text-white">
            <tr>
                <th class="bg-success text-white" [class.d-none]="isMobile">ID</th>
                <th class="bg-success text-white">Título</th>
                <th class="bg-success text-white" [class.d-none]="isMobile">Descrição</th>
                <th class="bg-success text-white">Concluída</th>
                <th class="bg-success text-white">Data de Criação</th>
                <th class="bg-success text-white">Ações</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let task of tasks$ | async">
                <td [class.d-none]="isMobile">{{ task.id }}</td>
                <td>
                    <span *ngIf="!task.editing">{{ task.title.length > 20 ? task.title.substring(0, 20) + '...' : task.title }}</span>
                    <input *ngIf="task.editing" type="text" [(ngModel)]="task.title" class="form-control">
                </td>
                <td [class.d-none]="isMobile">
                    <span *ngIf="!task.editing">{{ task.description.length > 20 ? task.description.substring(0, 20) + '...' : task.description }}</span>
                    <input *ngIf="task.editing" [(ngModel)]="task.description" class="form-control">
                </td>
                <td [ngClass]="{'text-success': task.completed, 'text-danger': !task.completed}">
                    <span *ngIf="!task.editing">{{ task.completed ? 'Sim' : 'Não' }}</span>
                    <select *ngIf="task.editing" [(ngModel)]="task.completed" class="form-control">
                        <option [ngValue]="true">Sim</option>
                        <option [ngValue]="false">Não</option>
                    </select>
                </td>
                <td>{{ task.created_at | date:'dd/MM/yyyy' }}</td>
                <td>
                    <span *ngIf="!task.editing" (click)="toggleTaskCompletion(task)" style="cursor: pointer;" title="Marcar como concluída">✅</span>
                    <span *ngIf="!task.editing" (click)="editTask(task)" style="cursor: pointer;" title="Editar">✏️</span>
                    <span *ngIf="!task.editing" (click)="deleteTask(task.id!)" style="cursor: pointer;" title="Excluir">🗑️</span>
                    <span *ngIf="task.editing" (click)="saveTask(task)" style="cursor: pointer;" title="Salvar">💾</span>
                    <span *ngIf="task.editing" (click)="cancelEdit(task)" style="cursor: pointer;" title="Cancelar">❌</span>
                </td>
            </tr>
        </tbody>
    </table>
</div>
